<div class="chat-header">
    <h3>ãƒãƒ£ãƒ³ãƒãƒ«å : <%= channel.channelName %></h3>
    <p>ãƒãƒ£ãƒ³ãƒãƒ«è©³ç´° : <%= channel.channelDetail %></p>
    <p>ãƒãƒ£ãƒ³ãƒãƒ«ä½œæˆè€… : <%= channel.createdBy %></p>
</div>

<div class="chat-saving">
    <% for(var i=0;i<channel.chatData.length;i++) { %>
        <div class="chatData">
            <p><%= channel.chatData[i].date %></p>
            <% for(var j=0;j<channel.chatData[i].messages.length;j++) { %>
                <div class="chat-devider">
                    <div class="db-message">
                        <a href="/users/<%= channel.chatData[i].messages[j].userId %>"><%= channel.chatData[i].messages[j].username %></a>
                        <p><%= channel.chatData[i].messages[j].time %></p>
                        <p><%= channel.chatData[i].messages[j].text %></p>
                        <input class="msgId" type="hidden" value="<%= channel.chatData[i].messages[j].customId %>">
                    </div>

                    <div class="selfMsgResponser">
                        <div class="response">
                            <button>ğŸ‘</button>
                            <button>ğŸ‘</button>
                        </div>
                        <input type="button" class="replyMsg" value="è¿”ä¿¡">
                        <input type="button" class="updateMsg" value="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†">
                        <input type="button" class="deleteMsg" value="é€ä¿¡å–æ¶ˆ">
                    </div>
                    
                    <div class="msgResponser">
                        <div class="response">
                            <button>ğŸ‘</button>
                            <button>ğŸ‘</button>
                        </div>
                        <input type="button" class="replyMsg" value="è¿”ä¿¡">
                    </div> 
                    <div class="updateForm">
                        <textarea cols="30" rows="3"></textarea> <!-- valueã«ã¤ã„ã¦ã¯ã€å¾Œã«ãªã£ã¦ã‹ã‚‰è¨­å®šã™ã‚‹ -->
                        <input type="submit" value="ã‚­ãƒ£ãƒ³ã‚»ãƒ«">
                        <input type="submit" value="å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹">
                    </div>       
                </div>
            <% } %>
        </div>
    <% } %> 
</div>


<div id="chat">
    <div class="chatDate">
        <p class="dateEmitter"></p> <!-- ã“ã“ã«1æ—¥ä¸€åº¦ã®ã¿å‡ºåŠ›ã‚’ã•ã›ã‚‹ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‰æ¶ˆãˆã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ãƒ»ã¤ã¾ã‚Šsocketã‹ã‚‰ã®å‡ºåŠ›ï¼‰ -->
    </div>
    <div class="socket-saving">
        <div class="socket-message">
            <a href="#" class="socketUser"></a>
            <p class="socketTime"></p>
            <p class="socketMsg"></p>
            <input type="hidden" class="customId" value="">
        </div>
        <div class="selfMsgResponser">
            <div class="response">
                <button>ğŸ‘</button>
                <button>ğŸ‘</button>
            </div>
            <input type="button" class="replyMsg" value="è¿”ä¿¡">
            <input type="button" class="updateMsg" value="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†">
            <input type="button" class="deleteMsg" value="é€ä¿¡å–æ¶ˆ">
        </div>
        <div class="msgResponser">
            <div class="response">
                <button>ğŸ‘</button>
                <button>ğŸ‘</button>
            </div>
            <input type="button" class="replyMsg" value="è¿”ä¿¡">
        </div>
        <div class="updateForm">
            <textarea id="toUpdate" cols="30" rows="3"></textarea> <!-- valueã«ã¤ã„ã¦ã¯ã€å¾Œã«ãªã£ã¦ã‹ã‚‰è¨­å®šã™ã‚‹ -->
            <input type="submit" value="ã‚­ãƒ£ãƒ³ã‚»ãƒ«">
            <input type="submit" value="å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹">
        </div>
    </div>
</div>

<div id="deletePopup" class="deletePopup">
    <h3>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã™ã‚‹</h3>
    <input type="submit" value="Ã—">
    <p>ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿå‰Šé™¤å¾Œã¯å…ƒã«æˆ»ã™ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p>
    <div class="deleteData">
        <a></a>
        <a></a>
        <p></p>
    </div>
    <input type="submit" value="ã‚­ãƒ£ãƒ³ã‚»ãƒ«">
    <input type="submit" value="å‰Šé™¤ã™ã‚‹">
</div>

<form id="chat-form">
    <input id="chat-input" type="text"ã€€placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">
    <input type="submit" value="é€ä¿¡" id="click">
</form>

<script type="module" src="https://cdn.jsdelivr.net/gh/tracker1/node-uuid4/browser.mjs"></script>
<script src="/socket.io/socket.io.js"></script>
<script type="module" src="/javascripts/chats/socket.js"></script>

<style>
    .msgResponser{
        display: none;
    }
    .selfMsgResponser{
        display: none;
    }
    .updateForm {
        display: none;
    }
    .show{
        display: flex;
        opacity: 1;
    }
    .deletePopup{
        position: fixed;
        left: 0;
        top: 0;
        width: 50%;
        height: 50%;
        z-index: 9999;
        opacity: 0;
        display: none;
        transition: .6s;
    }
    .deleteData{
        border-radius: 10px;
    }
    .show-popup{
        opacity: 1;
        display: block;
    }
</style>